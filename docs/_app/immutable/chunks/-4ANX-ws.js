import{c as e,g as t,s as r,j as n,aZ as a}from"./CPmqCMFw.js";import{w as o,o as s}from"./D0vQnvVS.js";import{a as i,p as l,e as c,c as u,H as f,S as d,R as p,b as h}from"./CO_K9f6t.js";function m(e){for(const t in e)e[t]=decodeURIComponent(e[t]);return e}function g({href:e}){return e.split("#")[0]}function w(e,t,r,n=!1){const a=new URL(e);Object.defineProperty(a,"searchParams",{value:new Proxy(a.searchParams,{get(e,n){if("get"===n||"getAll"===n||"has"===n)return(t,...a)=>(r(t),e[n](t,...a));t();const a=Reflect.get(e,n);return"function"==typeof a?a.bind(e):a}}),enumerable:!0,configurable:!0});const o=["href","pathname","search","toString","toJSON"];n&&o.push("hash");for(const s of o)Object.defineProperty(a,s,{get:()=>(t(),e[s]),enumerable:!0,configurable:!0});return a}new URL("sveltekit-internal://");const y=window.fetch;window.fetch=(e,t)=>("GET"!==(e instanceof Request?e.method:t?.method||"GET")&&v.delete(b(e)),y(e,t));const v=new Map;function b(e,t){let r=`script[data-sveltekit-fetched][data-url=${JSON.stringify(e instanceof Request?e.url:e)}]`;if(t?.headers||t?.body){const e=[];t.headers&&e.push([...new Headers(t.headers)].join(",")),t.body&&("string"==typeof t.body||ArrayBuffer.isView(t.body))&&e.push(t.body),r+=`[data-hash="${function(...e){let t=5381;for(const r of e)if("string"==typeof r){let e=r.length;for(;e;)t=33*t^r.charCodeAt(--e)}else{if(!ArrayBuffer.isView(r))throw new TypeError("value must be a string or TypedArray");{const e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let n=e.length;for(;n;)t=33*t^e[--n]}}return(t>>>0).toString(36)}(...e)}"]`}return r}function k(e,t=JSON.parse){try{return t(sessionStorage[e])}catch{}}function R(e,t,r=JSON.stringify){const n=r(t);try{sessionStorage[e]=n}catch{}}const S="sveltekit:snapshot",_="sveltekit:scroll",E="sveltekit:states",L="sveltekit:pageurl",U="sveltekit:history",A="sveltekit:navigation",x={tap:1,hover:2,viewport:3,eager:4,off:-1,false:-1},P=location.origin;function T(e){if(e instanceof URL)return e;let t=document.baseURI;if(!t){const e=document.getElementsByTagName("base");t=e.length?e[0].href:document.URL}return new URL(e,t)}function O(){return{x:pageXOffset,y:pageYOffset}}function j(e,t){return e.getAttribute(`data-sveltekit-${t}`)}const C={...x,"":x.hover};function I(e){let t=e.assignedSlot??e.parentNode;return 11===t?.nodeType&&(t=t.host),t}function N(e,t){for(;e&&e!==t;){if("A"===e.nodeName.toUpperCase()&&e.hasAttribute("href"))return e;e=I(e)}}function $(e,t,r){let n;try{if(n=new URL(e instanceof SVGAElement?e.href.baseVal:e.href,document.baseURI),r&&n.hash.match(/^#[^/]/)){const e=location.hash.split("#")[1]||"/";n.hash=`#${e}${n.hash}`}}catch{}const a=e instanceof SVGAElement?e.target.baseVal:e.target;return{url:n,external:!n||!!a||M(n,t,r)||(e.getAttribute("rel")||"").split(/\s+/).includes("external"),target:a,download:n?.origin===P&&e.hasAttribute("download")}}function D(e){let t=null,r=null,n=null,a=null,o=null,s=null,i=e;for(;i&&i!==document.documentElement;)null===n&&(n=j(i,"preload-code")),null===a&&(a=j(i,"preload-data")),null===t&&(t=j(i,"keepfocus")),null===r&&(r=j(i,"noscroll")),null===o&&(o=j(i,"reload")),null===s&&(s=j(i,"replacestate")),i=I(i);function l(e){switch(e){case"":case"true":return!0;case"off":case"false":return!1;default:return}}return{preload_code:C[n??"off"],preload_data:C[a??"off"],keepfocus:l(t),noscroll:l(r),reload:l(o),replace_state:l(s)}}function V(e){const t=o(e);let r=!0;return{notify:function(){r=!0,t.update(e=>e)},set:function(e){r=!1,t.set(e)},subscribe:function(e){let n;return t.subscribe(t=>{(void 0===n||r&&t!==n)&&e(n=t)})}}}const q={v:()=>{}};function B(){const{set:e,subscribe:t}=o(!1);let r;return{subscribe:t,check:async function(){clearTimeout(r);try{const t=await fetch(`${u}/_app/version.json`,{headers:{pragma:"no-cache","cache-control":"no-cache"}});if(!t.ok)return!1;const n="1768811380847"!==(await t.json()).version;return n&&(e(!0),q.v(),clearTimeout(r)),n}catch{return!1}}}}function M(e,t,r){return e.origin!==P||!e.pathname.startsWith(t)||!!r&&e.pathname!==location.pathname}function F(e){}const G=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);function H(e){return e instanceof f||e instanceof d?e.status:500}let J,W,K;s.toString().includes("$$")||/function \w+\(\) \{\}/.test(s.toString())?(J={data:{},form:null,error:null,params:{},route:{id:null},state:{},status:-1,url:new URL("https://example.com")},W={current:null},K={current:!1}):(J=new class{#e=e({});get data(){return t(this.#e)}set data(e){r(this.#e,e)}#t=e(null);get form(){return t(this.#t)}set form(e){r(this.#t,e)}#r=e(null);get error(){return t(this.#r)}set error(e){r(this.#r,e)}#n=e({});get params(){return t(this.#n)}set params(e){r(this.#n,e)}#a=e({id:null});get route(){return t(this.#a)}set route(e){r(this.#a,e)}#o=e({});get state(){return t(this.#o)}set state(e){r(this.#o,e)}#s=e(-1);get status(){return t(this.#s)}set status(e){r(this.#s,e)}#i=e(new URL("https://example.com"));get url(){return t(this.#i)}set url(e){r(this.#i,e)}},W=new class{#l=e(null);get current(){return t(this.#l)}set current(e){r(this.#l,e)}},K=new class{#l=e(!1);get current(){return t(this.#l)}set current(e){r(this.#l,e)}},q.v=()=>K.current=!0);const X={spanContext:()=>Y,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this},addLink(){return this},addLinks(){return this}},Y={traceId:"",spanId:"",traceFlags:0},z=new Set(["icon","shortcut icon","apple-touch-icon"]),Z=k(_)??{},Q=k(S)??{},ee={url:V({}),page:V({}),navigating:o(null),updated:B()};function te(e){Z[e]=O()}function re(e,t=!1){return t?location.replace(e.href):location.href=e.href,new Promise(()=>{})}async function ne(){if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistration(h||"/");e&&await e.update()}}function ae(){}let oe,se,ie,le,ce,ue;const fe=[],de=[];let pe=null;function he(){pe?.fork?.then(e=>e?.discard()),pe=null}const me=new Map,ge=new Set,we=new Set,ye=new Set;let ve,be,ke,Re,Se={branch:[],error:null,url:null},_e=!1,Ee=!1,Le=!0,Ue=!1,Ae=!1,xe=!1,Pe=!1;const Te=new Set,Oe=new Map;async function je(e,t,r){globalThis.__sveltekit_4uynw5?.data&&globalThis.__sveltekit_4uynw5.data,document.URL!==location.href&&(location.href=location.href),ue=e,await(e.hooks.init?.()),oe=function({nodes:e,server_loads:t,dictionary:r,matchers:n}){const a=new Set(t);return Object.entries(r).map(([t,[r,a,i]])=>{const{pattern:u,params:f}=l(t),d={id:t,exec:e=>{const t=u.exec(e);if(t)return c(t,f,n)},errors:[1,...i||[]].map(t=>e[t]),layouts:[0,...a||[]].map(s),leaf:o(r)};return d.errors.length=d.layouts.length=Math.max(d.errors.length,d.layouts.length),d});function o(t){const r=t<0;return r&&(t=~t),[r,e[t]]}function s(t){return void 0===t?t:[a.has(t),e[t]]}}(e),le=document.documentElement,ce=t,se=e.nodes[0],ie=e.nodes[1],se(),ie(),be=history.state?.[U],ke=history.state?.[A],be||(be=ke=Date.now(),history.replaceState({...history.state,[U]:be,[A]:ke},""));const n=Z[be];function a(){n&&(history.scrollRestoration="manual",scrollTo(n.x,n.y))}r?(a(),await async function(e,{status:t=200,error:r,node_ids:n,params:a,route:o,server_route:s,data:i,form:l}){_e=!0;const c=new URL(location.href);let u,f;({params:a={},route:o={id:null}}=await Ke(c,!1)||{}),u=oe.find(({id:e})=>e===o.id);let d=!0;try{const e=n.map(async(t,r)=>{const n=i[r];var s;return n?.uses&&(n.uses=(s=n.uses,{dependencies:new Set(s?.dependencies??[]),params:new Set(s?.params??[]),parent:!!s?.parent,route:!!s?.route,url:!!s?.url,search_params:new Set(s?.search_params??[])})),Be({loader:ue.nodes[t],url:c,params:a,route:o,parent:async()=>{const t={};for(let n=0;n<r;n+=1)Object.assign(t,(await e[n]).data);return t},server_data_node:Fe(n)})}),s=await Promise.all(e);if(u){const e=u.layouts;for(let t=0;t<e.length;t++)e[t]||s.splice(t,0,void 0)}f=qe({url:c,params:a,branch:s,status:t,error:r,form:l,route:u??null})}catch(h){if(h instanceof p)return void(await re(new URL(h.location,location.href)));f=await We({status:H(h),error:await Qe(h,{url:c,params:a,route:o}),url:c,route:o}),e.textContent="",d=!1}f.props.page&&(f.props.page.state={});await Ve(f,e,d)}(ce,r)):(await ze({type:"enter",url:T(ue.hash?ot(new URL(location.href)):location.href),replace_state:!0}),a()),function(){history.scrollRestoration="manual",addEventListener("beforeunload",e=>{let t=!1;if(Ne(),!Ue){const e=nt(Se,void 0,null,"leave"),r={...e.navigation,cancel:()=>{t=!0,e.reject(new Error("navigation cancelled"))}};ge.forEach(e=>e(r))}t?(e.preventDefault(),e.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&Ne()}),navigator.connection?.saveData||function(){let e,t,r;function n(e){e.defaultPrevented||o(e.composedPath()[0],x.tap)}le.addEventListener("mousemove",t=>{const r=t.target;clearTimeout(e),e=setTimeout(()=>{o(r,x.hover)},20)}),le.addEventListener("mousedown",n),le.addEventListener("touchstart",n,{passive:!0});const a=new IntersectionObserver(e=>{for(const t of e)t.isIntersecting&&(De(new URL(t.target.href)),a.unobserve(t.target))},{threshold:0});async function o(e,n){const a=N(e,le);if(!a||a===t&&n>=r)return;const{url:o,external:s,download:i}=$(a,h,ue.hash);if(s||i)return;const l=D(a),c=o&&Xe(Se.url)===Xe(o);if(!l.reload&&!c)if(n<=l.preload_data){t=a,r=x.tap;const e=await Ke(o,!1);if(!e)return;!async function(e){if(e.id!==pe?.id){he();const t={};Te.add(t),pe={id:e.id,token:t,promise:He({...e,preload:t}).then(e=>(Te.delete(t),"loaded"===e.type&&e.state.error&&he(),e)),fork:null}}pe.promise}(e)}else n<=l.preload_code&&(t=a,r=n,De(o))}function s(){a.disconnect();for(const e of le.querySelectorAll("a")){const{url:t,external:r,download:n}=$(e,h,ue.hash);if(r||n)continue;const o=D(e);o.reload||(o.preload_code===x.viewport&&a.observe(e),o.preload_code===x.eager&&De(t))}}ye.add(s),s()}();le.addEventListener("click",async t=>{if(t.button||1!==t.which)return;if(t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)return;if(t.defaultPrevented)return;const r=N(t.composedPath()[0],le);if(!r)return;const{url:n,external:a,target:o,download:s}=$(r,h,ue.hash);if(!n)return;if("_parent"===o||"_top"===o){if(window.parent!==window)return}else if(o&&"_self"!==o)return;const i=D(r);if(!(r instanceof SVGAElement)&&n.protocol!==location.protocol&&"https:"!==n.protocol&&"http:"!==n.protocol)return;if(s)return;const[l,c]=(ue.hash?n.hash.replace(/^#/,""):n.href).split("#"),u=l===g(location);if(!a&&(!i.reload||u&&c)){if(void 0!==c&&u){const[,a]=Se.url.href.split("#");if(a===c){if(t.preventDefault(),""===c||"top"===c&&null===r.ownerDocument.getElementById("top"))scrollTo({top:0});else{const e=r.ownerDocument.getElementById(decodeURIComponent(c));e&&(e.scrollIntoView(),e.focus())}return}if(Ae=!0,te(be),e(n),!i.replace_state)return;Ae=!1}t.preventDefault(),await new Promise(e=>{requestAnimationFrame(()=>{setTimeout(e,0)}),setTimeout(e,100)}),await ze({type:"link",url:n,keepfocus:i.keepfocus,noscroll:i.noscroll,replace_state:i.replace_state??n.href===location.href,event:t})}else Ye({url:n,type:"link",event:t})?Ue=!0:t.preventDefault()}),le.addEventListener("submit",e=>{if(e.defaultPrevented)return;const t=HTMLFormElement.prototype.cloneNode.call(e.target),r=e.submitter;if("_blank"===(r?.formTarget||t.target))return;if("get"!==(r?.formMethod||t.method))return;const n=new URL(r?.hasAttribute("formaction")&&r?.formAction||t.action);if(M(n,h,!1))return;const a=e.target,o=D(a);if(o.reload)return;e.preventDefault(),e.stopPropagation();const s=new FormData(a,r);n.search=new URLSearchParams(s).toString(),ze({type:"form",url:n,keepfocus:o.keepfocus,noscroll:o.noscroll,replace_state:o.replace_state??n.href===location.href,event:e})}),addEventListener("popstate",async t=>{if(!rt)if(t.state?.[U]){const r=t.state[U];if(Re={},r===be)return;const n=Z[r],a=t.state[E]??{},o=new URL(t.state[L]??location.href),s=t.state[A],i=!!Se.url&&g(location)===g(Se.url);if(s===ke&&(xe||i))return a!==J.state&&(J.state=a),e(o),Z[be]=O(),n&&scrollTo(n.x,n.y),void(be=r);const l=r-be;await ze({type:"popstate",url:o,popped:{state:a,scroll:n,delta:l},accept:()=>{be=r,ke=s},block:()=>{history.go(-l)},nav_token:Re,event:t})}else if(!Ae){e(new URL(location.href)),ue.hash&&location.reload()}}),addEventListener("hashchange",()=>{Ae&&(Ae=!1,history.replaceState({...history.state,[U]:++be,[A]:ke},"",location.href))});for(const t of document.querySelectorAll("link"))z.has(t.rel)&&(t.href=t.href);function e(e){Se.url=J.url=e,ee.page.set(at(J)),ee.page.notify()}addEventListener("pageshow",e=>{e.persisted&&ee.navigating.set(W.current=null)})}()}function Ce(e){de.some(e=>e?.snapshot)&&(Q[e]=de.map(e=>e?.snapshot?.capture()))}function Ie(e){Q[e]?.forEach((e,t)=>{de[t]?.snapshot?.restore(e)})}function Ne(){te(be),R(_,Z),Ce(ke),R(S,Q)}async function $e(e,t,r,a){let o;t.invalidateAll&&he(),await ze({type:"goto",url:T(e),keepfocus:t.keepFocus,noscroll:t.noScroll,replace_state:t.replaceState,state:t.state,redirect_count:r,nav_token:a,accept:()=>{t.invalidateAll&&(Pe=!0,o=[...Oe.keys()]),t.invalidate&&t.invalidate.forEach(tt)}}),t.invalidateAll&&n().then(n).then(()=>{Oe.forEach(({resource:e},t)=>{o?.includes(t)&&e.refresh?.()})})}async function De(e){const t=(await Ke(e,!1))?.route;t&&await Promise.all([...t.layouts,t.leaf].map(e=>e?.[1]()))}async function Ve(e,t,r){Se=e.state;const n=document.querySelector("style[data-sveltekit]");if(n&&n.remove(),Object.assign(J,e.props.page),ve=new ue.root({target:t,props:{...e.props,stores:ee,components:de},hydrate:r,sync:!1}),await Promise.resolve(),Ie(ke),r){const e={from:null,to:{params:Se.params,route:{id:Se.route?.id??null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};ye.forEach(t=>t(e))}Ee=!0}function qe({url:e,params:t,branch:r,status:n,error:a,route:o,form:s}){let i="never";if(!h||e.pathname!==h&&e.pathname!==h+"/")for(const h of r)void 0!==h?.slash&&(i=h.slash);else i="always";var l,c;e.pathname=(l=e.pathname,c=i,"/"===l||"ignore"===c?l:"never"===c?l.endsWith("/")?l.slice(0,-1):l:"always"!==c||l.endsWith("/")?l:l+"/"),e.search=e.search;const u={type:"loaded",state:{url:e,params:t,branch:r,error:a,route:o},props:{constructors:(f=r,f.filter(e=>null!=e)).map(e=>e.node.component),page:at(J)}};var f;void 0!==s&&(u.props.form=s);let d={},p=!J,m=0;for(let h=0;h<Math.max(r.length,Se.branch.length);h+=1){const e=r[h],t=Se.branch[h];e?.data!==t?.data&&(p=!0),e&&(d={...d,...e.data},p&&(u.props[`data_${m}`]=d),m+=1)}return(!Se.url||e.href!==Se.url.href||Se.error!==a||void 0!==s&&s!==J.form||p)&&(u.props.page={error:a,params:t,route:{id:o?.id??null},state:{},status:n,url:new URL(e),form:s??null,data:p?d:J.data}),u}async function Be({loader:e,parent:t,url:r,params:n,route:a,server_data_node:o}){let s=null,i=!0;const l={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},c=await e();if(c.universal?.load){let e=function(...e){for(const t of e){const{href:e}=new URL(t,r);l.dependencies.add(e)}};const u={tracing:{enabled:!1,root:X,current:X},route:new Proxy(a,{get:(e,t)=>(i&&(l.route=!0),e[t])}),params:new Proxy(n,{get:(e,t)=>(i&&l.params.add(t),e[t])}),data:o?.data??null,url:w(r,()=>{i&&(l.url=!0)},e=>{i&&l.search_params.add(e)},ue.hash),async fetch(t,n){t instanceof Request&&(n={body:"GET"===t.method||"HEAD"===t.method?void 0:await t.blob(),cache:t.cache,credentials:t.credentials,headers:[...t.headers].length>0?t?.headers:void 0,integrity:t.integrity,keepalive:t.keepalive,method:t.method,mode:t.mode,redirect:t.redirect,referrer:t.referrer,referrerPolicy:t.referrerPolicy,signal:t.signal,...n});const{resolved:a,promise:o}=Me(t,n,r);return i&&e(a.href),o},setHeaders:()=>{},depends:e,parent:()=>(i&&(l.parent=!0),t()),untrack(e){i=!1;try{return e()}finally{i=!0}}};s=await c.universal.load.call(null,u)??null}return{node:c,loader:e,server:o,universal:c.universal?.load?{type:"data",data:s,uses:l}:null,data:s??o?.data??null,slash:c.universal?.trailingSlash??o?.slash}}function Me(e,t,r){let n=e instanceof Request?e.url:e;const a=new URL(n,r);a.origin===r.origin&&(n=a.href.slice(r.origin.length));const o=Ee?function(e,t,r){if(v.size>0){const t=b(e,r),n=v.get(t);if(n){if(performance.now()<n.ttl&&["default","force-cache","only-if-cached",void 0].includes(r?.cache))return new Response(n.body,n.init);v.delete(t)}}return window.fetch(t,r)}(n,a.href,t):function(e,t){const r=b(e,t),n=document.querySelector(r);if(n?.textContent){n.remove();let{body:e,...t}=JSON.parse(n.textContent);const a=n.getAttribute("data-ttl");return a&&v.set(r,{body:e,init:t,ttl:1e3*Number(a)}),null!==n.getAttribute("data-b64")&&(e=i(e)),Promise.resolve(new Response(e,t))}return window.fetch(e,t)}(n,t);return{resolved:a,promise:o}}function Fe(e,t){return"data"===e?.type?e:"skip"===e?.type?t??null:null}function Ge({error:e,url:t,route:r,params:n}){return{type:"loaded",state:{error:e,url:t,route:r,params:n,branch:[]},props:{page:at(J),constructors:[]}}}async function He({id:e,invalidating:t,url:r,params:n,route:a,preload:o}){if(pe?.id===e)return Te.delete(pe.token),pe.promise;const{errors:s,layouts:i,leaf:l}=a,c=[...i,l];s.forEach(e=>e?.().catch(()=>{})),c.forEach(e=>e?.[1]().catch(()=>{}));const u=!!Se.url&&e!==Xe(Se.url),d=!!Se.route&&a.id!==Se.route.id,h=function(e,t){if(!e)return new Set(t.searchParams.keys());const r=new Set([...e.searchParams.keys(),...t.searchParams.keys()]);for(const n of r){const a=e.searchParams.getAll(n),o=t.searchParams.getAll(n);a.every(e=>o.includes(e))&&o.every(e=>a.includes(e))&&r.delete(n)}return r}(Se.url,r);let m=!1;const g=c.map(async(e,t)=>{if(!e)return;const o=Se.branch[t],s=e[1]===o?.loader&&!function(e,t,r,n,a,o){if(Pe)return!0;if(!a)return!1;if(a.parent&&e)return!0;if(a.route&&t)return!0;if(a.url&&r)return!0;for(const s of a.search_params)if(n.has(s))return!0;for(const s of a.params)if(o[s]!==Se.params[s])return!0;for(const s of a.dependencies)if(fe.some(e=>e(new URL(s))))return!0;return!1}(m,d,u,h,o.universal?.uses,n);return s?o:(m=!0,Be({loader:e[1],url:r,params:n,route:a,parent:async()=>{const e={};for(let r=0;r<t;r+=1)Object.assign(e,(await g[r])?.data);return e},server_data_node:Fe(e[0]?{type:"skip"}:null,e[0]?o?.server:void 0)}))});for(const f of g)f.catch(()=>{});const w=[];for(let v=0;v<c.length;v+=1)if(c[v])try{w.push(await g[v])}catch(y){if(y instanceof p)return{type:"redirect",location:y.location};if(Te.has(o))return Ge({error:await Qe(y,{params:n,url:r,route:{id:a.id}}),url:r,params:n,route:a});let e,t=H(y);if(y instanceof f)e=y.body;else{if(await ee.updated.check())return await ne(),await re(r);e=await Qe(y,{params:n,url:r,route:{id:a.id}})}const i=await Je(v,w,s);return i?qe({url:r,params:n,branch:w.slice(0,i.idx).concat(i.node),status:t,error:e,route:a}):await Ze(r,{id:a.id},e,t)}else w.push(void 0);return qe({url:r,params:n,branch:w,status:200,error:null,route:a,form:t?void 0:null})}async function Je(e,t,r){for(;e--;)if(r[e]){let n=e;for(;!t[n];)n-=1;try{return{idx:n+1,node:{node:await r[e](),loader:r[e],data:{},server:null,universal:null}}}catch{continue}}}async function We({status:e,error:t,url:r,route:n}){const a={};try{const o=await Be({loader:se,url:r,params:a,route:n,parent:()=>Promise.resolve({}),server_data_node:Fe(null)});return qe({url:r,params:a,branch:[o,{node:await ie(),loader:ie,universal:null,server:null,data:null}],status:e,error:t,route:null})}catch(o){if(o instanceof p)return $e(new URL(o.location,location.href),{},0);throw o}}async function Ke(e,t){if(e&&!M(e,h,ue.hash)){const r=await async function(e){const t=e.href;if(me.has(t))return me.get(t);let r;try{const n=(async()=>{let t=await ue.hooks.reroute({url:new URL(e),fetch:async(t,r)=>Me(t,r,e).promise})??e;if("string"==typeof t){const r=new URL(e);ue.hash?r.hash=t:r.pathname=t,t=r}return t})();me.set(t,n),r=await n}catch(n){return void me.delete(t)}return r}(e);if(!r)return;const n=function(e){return t=ue.hash?e.hash.replace(/^#/,"").replace(/[?#].+/,""):e.pathname.slice(h.length),t.split("%25").map(decodeURI).join("%25")||"/";var t}(r);for(const a of oe){const r=a.exec(n);if(r)return{id:Xe(e),invalidating:t,route:a,params:m(r),url:e}}}}function Xe(e){return(ue.hash?e.hash.replace(/^#/,""):e.pathname)+e.search}function Ye({url:e,type:t,intent:r,delta:n,event:a}){let o=!1;const s=nt(Se,r,e,t);void 0!==n&&(s.navigation.delta=n),void 0!==a&&(s.navigation.event=a);const i={...s.navigation,cancel:()=>{o=!0,s.reject(new Error("navigation cancelled"))}};return Ue||ge.forEach(e=>e(i)),o?null:s}async function ze({type:e,url:t,popped:r,keepfocus:o,noscroll:s,replace_state:i,state:l={},redirect_count:c=0,nav_token:u={},accept:f=ae,block:p=ae,event:m}){const g=Re;Re=u;const w=await Ke(t,!1),y="enter"===e?nt(Se,w,t,e):Ye({url:t,type:e,delta:r?.delta,intent:w,event:m});if(!y)return p(),void(Re===u&&(Re=g));const v=be,b=ke;f(),Ue=!0,Ee&&"enter"!==y.navigation.type&&ee.navigating.set(W.current=y.navigation);let k=w&&await He(w);if(!k){if(M(t,h,ue.hash))return await re(t,i);k=await Ze(t,{id:null},await Qe(new d(404,"Not Found",`Not found: ${t.pathname}`),{url:t,params:{},route:{id:null}}),404,i)}if(t=w?.url||t,Re!==u)return y.reject(new Error("navigation aborted")),!1;if("redirect"===k.type){if(c<20)return await ze({type:e,url:new URL(k.location,t),popped:r,keepfocus:o,noscroll:s,replace_state:i,state:l,redirect_count:c+1,nav_token:u}),void y.fulfil(void 0);k=await We({status:500,error:await Qe(new Error("Redirect loop"),{url:t,params:{},route:{id:null}}),url:t,route:{id:null}})}else if(k.props.page.status>=400){await ee.updated.check()&&(await ne(),await re(t,i))}if(fe.length=0,Pe=!1,te(v),Ce(b),k.props.page.url.pathname!==t.pathname&&(t.pathname=k.props.page.url.pathname),l=r?r.state:l,!r){const e=i?0:1,r={[U]:be+=e,[A]:ke+=e,[E]:l};(i?history.replaceState:history.pushState).call(history,r,"",t),i||function(e,t){let r=e+1;for(;Z[r];)delete Z[r],r+=1;for(r=t+1;Q[r];)delete Q[r],r+=1}(be,ke)}const R=w&&pe?.id===w.id?pe.fork:null;let S;if(pe=null,k.props.page.state=l,Ee){const e=(await Promise.all(Array.from(we,e=>e(y.navigation)))).filter(e=>"function"==typeof e);if(e.length>0){let t=function(){e.forEach(e=>{ye.delete(e)})};e.push(t),e.forEach(e=>{ye.add(e)})}Se=k.state,k.props.page&&(k.props.page.url=t);const r=R&&await R;r?S=r.commit():(ve.$set(k.props),_=k.props.page,Object.assign(J,_),S=a?.()),xe=!0}else await Ve(k,ce,!1);var _;const{activeElement:L}=document;await S,await n(),await n();let x=r?r.scroll:s?O():null;if(Le){const e=t.hash&&document.getElementById(st(t));if(x)scrollTo(x.x,x.y);else if(e){e.scrollIntoView();const{top:t,left:r}=e.getBoundingClientRect();x={x:pageXOffset+r,y:pageYOffset+t}}else scrollTo(0,0)}const P=document.activeElement!==L&&document.activeElement!==document.body;o||P||function(e,t=null){const r=document.querySelector("[autofocus]");if(r)r.focus();else{const r=st(e);if(r&&document.getElementById(r)){const{x:n,y:a}=t??O();setTimeout(()=>{const t=history.state;rt=!0,location.replace(`#${r}`),ue.hash&&location.replace(e.hash),history.replaceState(t,"",e.hash),scrollTo(n,a),rt=!1})}else{const e=document.body,t=e.getAttribute("tabindex");e.tabIndex=-1,e.focus({preventScroll:!0,focusVisible:!1}),null!==t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}const n=getSelection();if(n&&"None"!==n.type){const e=[];for(let t=0;t<n.rangeCount;t+=1)e.push(n.getRangeAt(t));setTimeout(()=>{if(n.rangeCount===e.length){for(let t=0;t<n.rangeCount;t+=1){const r=e[t],a=n.getRangeAt(t);if(r.commonAncestorContainer!==a.commonAncestorContainer||r.startContainer!==a.startContainer||r.endContainer!==a.endContainer||r.startOffset!==a.startOffset||r.endOffset!==a.endOffset)return}n.removeAllRanges()}})}}}(t,x),Le=!0,k.props.page&&Object.assign(J,k.props.page),Ue=!1,"popstate"===e&&Ie(ke),y.fulfil(void 0),ye.forEach(e=>e(y.navigation)),ee.navigating.set(W.current=null)}async function Ze(e,t,r,n,a){return e.origin!==P||e.pathname!==location.pathname||_e?await re(e,a):await We({status:n,error:r,url:e,route:t})}function Qe(e,t){if(e instanceof f)return e.body;const r=H(e),n=function(e){return e instanceof d?e.text:"Internal Error"}(e);return ue.hooks.handleError({error:e,event:t,status:r,message:n})??{message:n}}function et(e,t={}){return(e=new URL(T(e))).origin!==P?Promise.reject(new Error("goto: invalid URL")):$e(e,t,0)}function tt(e){if("function"==typeof e)fe.push(e);else{const{href:t}=new URL(e,location.href);fe.push(e=>e.href===t)}}let rt=!1;function nt(e,t,r,n){let a,o;const s=new Promise((e,t)=>{a=e,o=t});s.catch(()=>{});return{navigation:{from:{params:e.params,route:{id:e.route?.id??null},url:e.url},to:r&&{params:t?.params??null,route:{id:t?.route?.id??null},url:r},willUnload:!t,type:n,complete:s},fulfil:a,reject:o}}function at(e){return{data:e.data,error:e.error,form:e.form,params:e.params,route:e.route,state:e.state,status:e.status,url:e.url}}function ot(e){const t=new URL(e);return t.hash=decodeURIComponent(e.hash),t}function st(e){let t;if(ue.hash){const[,,r]=e.hash.split("#",3);t=r??""}else t=e.hash.slice(1);return decodeURIComponent(t)}export{je as a,et as g,F as l,J as p,ee as s};
