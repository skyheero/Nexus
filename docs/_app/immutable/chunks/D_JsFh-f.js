let e=null,t=null,s="disconnected";const n={status:new Set,error:new Set,message:new Set};function r(e,t){n[e].forEach(e=>e(t))}function a(){return e||(e=new Worker(new URL(""+new URL("../workers/mqtt_worker-BMCihztw.js",import.meta.url).href,import.meta.url),{type:"module"}),e.onmessage=e=>{const{type:t,...n}=e.data;switch(t){case"status":s=n.status,r("status",n.status);break;case"error":r("error",n.error);break;case"message":r("message",n.data)}},e)}async function o(e){t=e;a().postMessage({type:"start",clientId:e})}function u(e,t){a().postMessage({type:"send",userId:e,payload:t})}function c(){e&&e.postMessage({type:"end"})}function d(e,t){n[e].add(t)}function i(e,t){n[e].delete(t)}export{t as clientID,c as end,i as off,d as on,u as send,o as start,s as status};
